
"""
    Public scalars, types, interfaces, enums...
"""

# -------- scalars

scalar JSONObject
scalar URL
scalar PhoneNumber
scalar DateTimeISO
scalar PositiveInt
scalar PositiveFloat
scalar EmailAddress
scalar JWT


# -------- to extend

directive @auth(role: RoleEnum) on FIELD_DEFINITION # can bes used only on Query or Mutation fields


# -------- to extend

type Query

type Mutation {
    createJWT(role: RoleEnum): JWTResponseType # can access only backend
    startImageUpload(id: ID!): StartUploadImageResponseType! @auth(role: ADMIN)
    finalizeImageUpload(id: ID!): FinalizeUploudImageResponseType! @auth(role: ADMIN)
}


# -------- interfaces

interface BaseMutationResponseInterface {
    """
        All mutation responses must include data field
        with a type of modified entity ( always represents an array )
    """

    code: Int!
    message: String!
    success: Boolean!
}


# -------- types

type StartUploadImageType { 
    id: ID!
    url: URL!
}

type FinalizeUploadImageType {
    id: ID!
    url: URL!
}

type StartUploadImageResponseType implements BaseMutationResponseInterface {
    code: Int!
    message: String!
    success: Boolean!
    data: [StartUploadImageType]!
}

type FinalizeUploudImageResponseType implements BaseMutationResponseInterface {
    code: Int!
    message: String!
    success: Boolean!
    data: [FinalizeUploadImageType]!
}

type JWTResponseType implements BaseMutationResponseInterface {
    code: Int!
    message: String!
    success: Boolean!
    data: [JWTType]!
}

type JWTType { 
    token: JWT!
}

type PaginationType {
    total: Int!
    pageInfo: PageInfoType!
}


type PageInfoType {
    hasNextPage: Boolean!
    hasPreviousPage: Boolean!
}


# -------- enums

enum OrderEnum {
    ASC
    DESC
}

enum RoleEnum {
    ADMIN
    USER
}


# -------- inputs

input PaginationInput {
    perPage: PositiveInt!
    page: PositiveInt!
}

input SortInput {
    field: String!
    order: OrderEnum!
}