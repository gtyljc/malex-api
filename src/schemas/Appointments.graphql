

# -------- query

extend type Query {
    appointment(id: ID!): AppointmentResponseType!
    appointments(
        ids: [ID], 
        filter: JSONObject, 
        pagination: PaginationInput, 
        sort: SortInput
    ): AppointmentResponseType!
}


# -------- mutation

extend type Mutation {
    updateAppointment(id: ID!, data: AppointmentUpdateInput): AppointmentResponseType! @auth
    updateManyAppointments(ids: [ID]!, data: AppointmentUpdateInput): AppointmentResponseType! @auth
    createAppointment(data: AppointmentCreateInput!): AppointmentResponseType! @auth
    appointmentsInRange(from: DateTimeISO! to: DateTimeISO!): AppointmentResponseType!
}


# --------  types

type AppointmentType {
    id: ID! @auth
    name: String! @auth
    surname: String! @auth
    address: String! @auth
    job_desc: String! @auth
    bwt: BestWayToTouchEnum! @auth
    number: PhoneNumber! @auth
    date: DateTimeISO! @auth
    duration: PositiveFloat!
}

type AppointmentResponseType implements BaseMutationResponseInterface {
    code: String!
    success: Boolean!
    message: String!
    data: [AppointmentType]!
    pagination: PaginationType
}


# --------  inputs

input AppointmentCreateInput {
    name: String!
    surname: String!
    address: String!
    job_desc: String!
    bwt: BestWayToTouchEnum!
    number: PhoneNumber!
    date: DateTimeISO!
}

input AppointmentUpdateInput {
    name: String
    surname: String
    address: String
    job_desc: String
    bwt: BestWayToTouchEnum
    number: PhoneNumber
    date: DateTimeISO
    duration: PositiveFloat
}


# --------  enums

enum BestWayToTouchEnum {
    WHATSAPP
    PHONE
    TEXT
}